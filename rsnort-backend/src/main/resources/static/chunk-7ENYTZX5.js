import{a as U}from"./chunk-ODLLWNX5.js";import{a as F,b as L}from"./chunk-QRV5FDXS.js";import{a as N}from"./chunk-OB7RAM33.js";import{a as k,b as E}from"./chunk-A7VEZ463.js";import{l as O,n as z}from"./chunk-HVGVPRCV.js";import{a as T,b as V}from"./chunk-OIW6JI6U.js";import{Aa as o,Fb as M,Gb as S,Hb as v,Jc as D,La as h,Qa as b,Y as p,Ya as i,_b as I,ba as c,bb as r,bc as P,ca as f,cb as t,db as l,eb as x,ec as y,fb as C,hb as w,jb as g,kb as u,tb as A,ub as s,ya as _}from"./chunk-GVHJH67V.js";function B(a,n){if(a&1){let e=w();x(0),r(1,"div",4)(2,"button",5),g("click",function(){c(e);let d=u();return f(d.downloadCurrentAgentAlerts())}),r(3,"mat-icon"),s(4,"download"),t(),s(5," Descargar alertas de este agente "),t(),r(6,"button",6),g("click",function(){c(e);let d=u();return f(d.downloadAllAlerts())}),r(7,"mat-icon"),s(8,"download"),t(),s(9," Descargar todas las alertas "),t()(),r(10,"div",7)(11,"mat-card",8),l(12,"grafana-frame",9),t(),r(13,"mat-card",8),l(14,"grafana-frame",10),t(),r(15,"mat-card",8),l(16,"grafana-frame",11),t()(),r(17,"div",12)(18,"mat-card",13),l(19,"iframe",14),M(20,"safeUrl"),t()(),C()}if(a&2){let e=n.ngIf;o(12),i("ip",e.ip),o(2),i("ip",e.ip),o(2),i("ip",e.ip),o(3),i("src",S(20,4,"http://"+e.ip+":3000/d-solo/ALgSiPiWk/snort-ids-ips-dashboard?orgId=1&timezone=browser&refresh=1m&panelId=26&__feature.dashboardSceneSolo"),_)}}function R(a,n){a&1&&l(0,"mat-spinner")}var W=class a{agentSrv=p(D);http=p(y);downloadCurrentAgentAlerts(){let n=this.agentSrv.current;if(!n)return;let e=`http://${n.ip}:9000/download-alerts`;window.open(e,"_blank")}downloadAllAlerts(){let n=this.agentSrv.getAll().find(m=>m.id==="central")?.ip;if(!n){console.error("No se encontr\xF3 el agente central");return}let e=`http://${n}:9000/download-alerts`;window.open(e,"_blank")}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=h({type:a,selectors:[["app-alerts"]],decls:6,vars:2,consts:[["loadingAgents",""],[1,"dashboard-container"],[1,"title"],[4,"ngIf","ngIfElse"],[1,"alert-actions"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"],[1,"grafana-top"],[1,"grafana-panel"],["path","/d-solo/ALgSiPiWk/snort-ids-ips-dashboard?orgId=1&panelId=9&refresh=30s",3,"ip"],["path","/d-solo/ALgSiPiWk/snort-ids-ips-dashboard?orgId=1&panelId=10&refresh=30s",3,"ip"],["path","/d-solo/ALgSiPiWk/snort-ids-ips-dashboard?orgId=1&panelId=11&refresh=30s",3,"ip"],[1,"grafana-bottom"],[1,"grafana-panel","full"],["width","100%","height","600","frameborder","0","loading","lazy",3,"src"]],template:function(e,m){if(e&1&&(r(0,"div",1)(1,"h1",2),s(2,"\u26A0\uFE0F Panel de Alertas"),t(),b(3,B,21,6,"ng-container",3)(4,R,1,0,"ng-template",null,0,v),t()),e&2){let d=A(5);o(3),i("ngIf",m.agentSrv.current)("ngIfElse",d)}},dependencies:[P,I,V,T,L,F,z,O,E,k,U,N],styles:[".dashboard-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;background-color:#121212;color:#e0e0e0;font-family:Segoe UI,sans-serif;padding:2rem;box-sizing:border-box}.title[_ngcontent-%COMP%]{text-align:center;font-size:2.5rem;color:#03dac6;margin-bottom:2rem;text-shadow:0 0 10px rgba(3,218,198,.4)}.grafana-top[_ngcontent-%COMP%]{display:grid;gap:1rem;grid-template-columns:repeat(auto-fit,minmax(520px,1fr));margin-bottom:1.5rem}.grafana-bottom[_ngcontent-%COMP%]{flex:1;min-height:600px}.grafana-panel[_ngcontent-%COMP%]{background-color:#1e1e1e;box-shadow:0 0 15px #03dac64d;border-radius:8px;overflow:hidden;display:flex;flex-direction:column}.grafana-panel.full[_ngcontent-%COMP%]{height:100%}grafana-frame[_ngcontent-%COMP%]{display:block;height:100%}grafana-frame[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%;height:100%;border:none}.alert-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin:1rem 0;flex-wrap:wrap}"]})};export{W as AlertsComponent};
